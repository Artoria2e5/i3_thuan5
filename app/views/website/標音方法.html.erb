<%# encoding: utf-8 %>
<div class="huainn5">
	<article>
		<section>
			標音方法
			<hr />
			<script src="http://code.jquery.com/jquery-1.10.2.min.js"
				type="text/javascript"></script>
			<p>
				目前先以閩南語漳州腔來測試，泉州腔及客家話待功能完整即會放上。<br />
			</p>
			<form
				onSubmit="javascript:return tsha5('./自動標音/'+$('#ai3tsha5').val())">
				<p>
					<input type="radio" name="言語種類" value="閩南語混合腔"
						onClick="javascript:重設文白()" disabled="disabled">閩南語混合腔 <input
						type="radio" name="言語種類" value="閩南語偏漳腔"
						onClick="javascript:重設文白()" checked>閩南語偏漳腔 <input
						type="radio" name="言語種類" value="閩南語偏泉腔"
						onClick="javascript:重設文白()" disabled="disabled">閩南語偏泉腔<br />
					<input type="radio" name="言語種類" value="客家話四縣腔"
						onClick="javascript:重設文白()" disabled="disabled">客家話四縣腔 <input
						type="radio" name="言語種類" value="客家話海陸腔"
						onClick="javascript:重設文白()" disabled="disabled">客家話海陸腔 <input
						type="radio" name="言語種類" value="客家話大埔腔"
						onClick="javascript:重設文白()" disabled="disabled">客家話大埔腔<br />
					<input type="radio" name="言語種類" value="客家話饒平腔"
						onClick="javascript:重設文白()" disabled="disabled">客家話饒平腔 <input
						type="radio" name="言語種類" value="客家話詔安腔"
						onClick="javascript:重設文白()" disabled="disabled">客家話詔安腔 <input
						type="radio" name="言語種類" value="國語" onClick="javascript:重設文白()"
						disabled="disabled">國語<br />
				</p>
				<p>
					標音選項：<select name="標音選項" disabled="disabled">
						<option value="臺羅數字加注音">臺羅數字加注音</option>
						<option value="臺羅閏號加注音">臺羅閏號加注音</option>
						<option value="通用加注音">通用加注音</option>
						<option value="注音符號">注音符號</option>
						<option value="臺羅數字調">臺羅數字調</option>
						<option value="臺羅閏號調">臺羅閏號調</option>
						<option value="通用拼音">通用拼音</option>
					</select>
				</p>
				<p>
					<input type="radio" name="言語層" value="白話音"
						onClick="javascript:重設文白()" checked>白話音 <input
						type="radio" name="言語層" value="文讀音" onClick="javascript:重設文白()">文讀音<br>
					<input type="text" size="20" id="ai3tsha5" value="我有一張椅仔！！"><input
						type="submit" value="標音">
				</p>
			</form>
			<p>
				<span id="tsha5e5kiat4ko2"></span>
			</p>
			<p>
				<input type="button" value="製表" onClick="javascript:製稿表()">
			<div id="稿表"></div>
			</p>
			<p>
			<hr />
			註：若有字音不符期待，可點選該字，就會變換標音！！
			</p>
		</section>
		<section>
			文書處理器編輯說明
			<hr />
			<p>
				標音結果可於微軟Ｗord文書處理器上編輯，但是因為Word本身限制，需先由LibreOffice將製表結果存至odt檔（若量小可以使用複製的），再由微軟Word打開，詳細流程如下：<br />
			</p>
			<p>
				0.請先下載並安裝<a href="http://zh-tw.libreoffice.org/download/">LibreOffice</a>，選最新版的（第一個）即可。<br />
				<%= image_tag('piau1im1/00.jpg', :class => "suet4bing5too5") %><br />
			</p>
			<p>
				1.先選擇需要的腔，標音方法，並輸入要標音的字。<br /> <%= image_tag('piau1im1/01.jpg',
				:class => "suet4bing5too5") %><br />
			</p>
			<p>
				2.按「標音」鍵，會產生標音結果。<br /> <%= image_tag('piau1im1/02.jpg', :class =>
				"suet4bing5too5") %><br />
			</p>
			<p>
				3.若有字音不符期待，可點選該字，就會變換標音。<br />
			</p>
			<p>
				4.標音完選好選項後按「製表」，產生表格格式供使用。<br /> <%= image_tag('piau1im1/04.jpg',
				:class => "suet4bing5too5") %><br />
			</p>
			<p>
				5.將網頁另存新檔。<br /> <%= image_tag('piau1im1/05.jpg', :class =>
				"suet4bing5too5") %><br />
			</p>
			<p>
				6.要選擇「完整格式」。<br /> <%= image_tag('piau1im1/06.jpg', :class =>
				"suet4bing5too5") %><br />
			</p>
			<p>
				7.使用第０步下載的LibreOffice Writer打開。<br /> <%=
				image_tag('piau1im1/07.jpg', :class => "suet4bing5too5") %><br />
			</p>
			<p>
				8.可以看到網頁，將製表以外的額外頁面刪除，留需要的部份。<br /> <%= image_tag('piau1im1/08.jpg',
				:class => "suet4bing5too5") %><br />
			</p>
			<p>
				9.另存新檔，將存成odt檔。<br /> <%= image_tag('piau1im1/09.jpg', :class =>
				"suet4bing5too5") %><br />
			</p>
			<p>
				10.選擇ODT檔案格式。<br /> <%= image_tag('piau1im1/10.jpg', :class =>
				"suet4bing5too5") %><br />
			</p>
			<p>
				11.之後可依習慣選擇文書處理器。<br /> <%= image_tag('piau1im1/11.jpg', :class =>
				"suet4bing5too5") %><br />
			</p>
			<p>
				註：若選擇使用微軟的Word，其2007之後的版本已支援odt，2003之前的版本需裝「Sun ODF Plugin for
				Microsoft Office」。<br /> 12.若使用微軟Word，需再另外新檔為doc檔編輯。<br /> <%=
				image_tag('piau1im1/12.jpg', :class => "suet4bing5too5") %><br />
			</p>
			<script type="text/javascript">
				var tsha5tioh4 = new Array();
				var suan2 = new Array();
				tsha5 = function(bang2tsi2)
				{
					$('#tsha5e5kiat4ko2').html('處理中……');
					/*alert(bang2tsi2);//*/
					$
							.ajax({
								url : bang2tsi2,
								type : 'GET',
								data : {},
								error : function(xhr)
								{
									$('#tsha5e5kiat4ko2').html('發生錯誤！！');
									$('#tsha5e5kiat4ko2').fadeIn();
								},
								success : function(response)
								{
									//$('#tsha5e5kiat4ko2').html(response);
									//alert(response);
									tsha5tioh4 = eval('(' + response + ')');
									suan2 = new Array(tsha5tioh4.length);
									var str = '';
									for ( var i = 0; i < tsha5tioh4.length; ++i)
									{
										str += '<span class="suan2" id="tsha5e5kiat4ko2_'
												+ i
												+ '" onclick="javascript:au7tsit8e5kiat4ko2(this)">';
										str += '</span>';
									}
									$('#tsha5e5kiat4ko2').html(str);
									重設文白();
									$('#tsha5e5kiat4ko2').fadeIn();
								}
							});
					return false;
				};
				function san2sing1ji7kiat4ko2(ji7kiat4ko2)
				{
					var i = +ji7kiat4ko2.id.split('_', 2)[1];
					var str = '';
					for ( var k = 0; k < tsha5tioh4[i][suan2[i]].綜合標音.length; ++k)
					{
						str += '<ruby><rb>';
						str += tsha5tioh4[i][suan2[i]].綜合標音[k].型體;
						str += tsha5tioh4[i][suan2[i]].綜合標音[k].吳守禮方音;
						str += '</rb><rt>';
						str += tsha5tioh4[i][suan2[i]].綜合標音[k].臺羅數字調;
						str += '</rt></ruby>';
					}
					ji7kiat4ko2.innerHTML = str;
					tshue7tsoo2ji7(ji7kiat4ko2);
				}
				function au7tsit8e5kiat4ko2(ji7kiat4ko2)
				{
					var i = +ji7kiat4ko2.id.split('_', 2)[1];
					if ($('input[name=言語層]:checked').val() == '文讀音')
					{
						suan2[i] += tsha5tioh4[i].length - 1;
					} else
					//if($('input[name=言語層]:checked').val()=='白話音')
					{
						suan2[i] += 1;
					}
					suan2[i] %= tsha5tioh4[i].length;
					san2sing1ji7kiat4ko2(ji7kiat4ko2);
					//alert(ji7kiat4ko2.id+suan2.length);
					//$('#'+ji7kiat4ko2.id).html('');
					//ji7kiat4ko2.innerHTML='';
				}
				function 重設文白()
				{
					if ($('input[name=言語層]:checked').val() == '文讀音')
					{
						for ( var i = 0; i < suan2.length; ++i)
							suan2[i] = tsha5tioh4[i].length - 1;
					} else
					//if($('input[name=言語層]:checked').val()=='白話音')
					{
						for ( var i = 0; i < suan2.length; ++i)
							suan2[i] = 0;
					}
					for ( var i = 0; i < tsha5tioh4.length; ++i)
					{
						san2sing1ji7kiat4ko2(document
								.getElementById('tsha5e5kiat4ko2_' + i));
					}
				}
				function 製稿表()
				{
					var 第幾字 = 0;
					var 語法 = '';
					var 面頂 = '', 下跤 = '';
					for ( var i = 0; i < tsha5tioh4.length; ++i)
					{
						for ( var j = 0; j < tsha5tioh4[i][suan2[i]].綜合標音.length; j++)
						{
							if (第幾字 % 10 == 0 && 第幾字 != 0)
							{
								語法 += '<table><tr>';
								語法 += 面頂;
								語法 += '</tr><tr>';
								語法 += 下跤;
								語法 += '</tr></table>';
								面頂 = '';
								下跤 = '';
							}
							面頂 += '<td class="表的字">';
							面頂 += tsha5tioh4[i][suan2[i]].綜合標音[j].型體;
							面頂 += tsha5tioh4[i][suan2[i]].綜合標音[j].吳守禮方音;
							面頂 += '</td>';
							下跤 += '<td class="表的音">';
							下跤 += tsha5tioh4[i][suan2[i]].綜合標音[j].臺羅數字調;
							下跤 += '</td>';
							第幾字 += 1;
						}
					}
					語法 += '<table><tr>';
					語法 += 面頂;
					語法 += '</tr><tr>';
					語法 += 下跤;
					語法 += '</tr></table>';
					var 表 = document.getElementById('稿表');
					表.innerHTML = 語法;
					tshue7tsoo2ji7(表);
				}
			</script>

		</section>
	</article>
</div>
